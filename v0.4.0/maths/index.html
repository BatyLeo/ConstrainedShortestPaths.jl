<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Mathematical background · ConstrainedShortestPaths.jl</title><meta name="title" content="Mathematical background · ConstrainedShortestPaths.jl"/><meta property="og:title" content="Mathematical background · ConstrainedShortestPaths.jl"/><meta property="twitter:title" content="Mathematical background · ConstrainedShortestPaths.jl"/><meta name="description" content="Documentation for ConstrainedShortestPaths.jl."/><meta property="og:description" content="Documentation for ConstrainedShortestPaths.jl."/><meta property="twitter:description" content="Documentation for ConstrainedShortestPaths.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ConstrainedShortestPaths.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Mathematical background</a><ul class="internal"><li><a class="tocitem" href="#Generalized-constrained-shortest-path:-problem-formulation"><span>Generalized constrained shortest path: problem formulation</span></a></li><li><a class="tocitem" href="#Algorithms"><span>Algorithms</span></a></li><li><a class="tocitem" href="#Examples"><span>Examples</span></a></li></ul></li><li><span class="tocitem">Tutorial</span><ul><li><a class="tocitem" href="../basic_shortest_path/">Usual shortest path</a></li><li><a class="tocitem" href="../resource_shortest_path/">Shortest path with linear resource constraints</a></li><li><a class="tocitem" href="../stochastic_vsp/">Stochastic Vehicle Scheduling</a></li><li><a class="tocitem" href="../custom/">Implement a custom problem</a></li></ul></li><li><a class="tocitem" href="../api/">API reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Mathematical background</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Mathematical background</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/BatyLeo/ConstrainedShortestPaths.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/BatyLeo/ConstrainedShortestPaths.jl/blob/main/docs/src/maths.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Mathematical-background"><a class="docs-heading-anchor" href="#Mathematical-background">Mathematical background</a><a id="Mathematical-background-1"></a><a class="docs-heading-anchor-permalink" href="#Mathematical-background" title="Permalink"></a></h1><p>This page explains the mathematical framework used by <code>ConstrainedShortestPath.jl</code>, and its application to a few examples It&#39;s simplified version of the framework from <a href="https://arxiv.org/abs/1504.07880">Parmentier 2017</a>, retricted to acyclic graphs.</p><h2 id="Generalized-constrained-shortest-path:-problem-formulation"><a class="docs-heading-anchor" href="#Generalized-constrained-shortest-path:-problem-formulation">Generalized constrained shortest path: problem formulation</a><a id="Generalized-constrained-shortest-path:-problem-formulation-1"></a><a class="docs-heading-anchor-permalink" href="#Generalized-constrained-shortest-path:-problem-formulation" title="Permalink"></a></h2><p>Let <span>$D = (V, A)$</span> be an acyclic digraph. Let <span>$o, d$</span> two vertices, and <span>$\mathcal{P}\in\mathcal{P}_{od}$</span> a set of <span>$o-d$</span> path in <span>$D$</span>. We want to find a path <span>$P^\star \in\mathcal{P}$</span> minimizing a given cost function <span>$P\mapsto C(P)$</span>:</p><p class="math-container">\[\min_{P\in\mathcal{P}}C(P)\]</p><h3 id="Setting"><a class="docs-heading-anchor" href="#Setting">Setting</a><a id="Setting-1"></a><a class="docs-heading-anchor-permalink" href="#Setting" title="Permalink"></a></h3><p>Before describing the details of the algorithms, we must first define some modeling elements specific to the treated problem.</p><ol><li>We define the two following sets:<ul><li>Set of <strong>forward resources</strong> <span>$Q^F$</span>, provided with a partial order <span>$\leq^F$</span>.</li><li>Set of <strong>backward resources</strong> <span>$Q^B$</span>, provided with a partial order <span>$\leq^B$</span>.</li></ul><span>$(Q^F, \leq^F)$</span> and <span>$(Q^B, \leq^B)$</span> should be <em>lattices</em>: a partially ordered set <span>$(S,\leq)$</span> is a <em>lattice</em> if any pair <span>$s, s&#39;\in S$</span>, admits a greatest lower bound <span>$s\wedge s&#39;$</span> (i.e. <span>$\forall b\in S,\, (b \leq s \text{ and } b\leq s&#39;) \implies b\leq s\wedge s&#39;$</span>)</li><li>For every arc <span>$a\in A$</span>, we define two functions:<ul><li>A <strong>forward extension function</strong> : <span>$f^F_a:Q^F \to Q^F$</span>, increasing</li><li>A <strong>backward extension function</strong> : <span>$f^B_a : Q^B \to Q^B$</span>, increasing</li></ul></li><li>We also define:<ul><li>A <strong>cost function</strong> : <span>$c:Q^F\times Q^B \to \mathbb{R}\cup\{+\infty\}$</span>, increasing</li><li>Resources corresponding to vertices <span>$o$</span> an <span>$d$</span>: <span>$q^F_o\in Q^F$</span>, <span>$q^B_d\in Q^B$</span> </li></ul></li></ol><p>All these new theoretical elements should be connected to the initial problem formulation by following one of these (equivalent) properties:</p><ul><li>For all <span>$o-d$</span> path <span>$P = (o=v_0, a_1, v_1, \dots, a_k, v_k=d)$</span>, we have :<p class="math-container">\[\forall i, i&#39;\in [k],\, c(f^F_i \circ f^F_{i-1}\circ\dots\circ f^F_1(q^F_o), f^B_{i+1} \circ f^B_{i+2}\circ\dots\circ f^B_k(q^B_d)) = C(P)\in\mathbb{R}\cup\{+\infty\}\]</p></li><li>For all <span>$o-d$</span> path <span>$P$</span> and every decomposition of <span>$P$</span> as <span>$(R_1, R_2)$</span>, we have <span>$C(P)=c(q^F_{R_1}, q^B_{R_2})$</span>, with:<ul><li>For all <span>$o-v$</span> path <span>$R_1 = (o=v_0, a_1, v_1, \dots, a_i, v_i=v)$</span>:</li></ul><p class="math-container">\[q^F_{R_1} = f^F_{a_i} \circ f^F_{a_{i-1}}\circ\dots \circ f^F_{a_1}(q^F_o)\]</p><ul><li>For all <span>$v-d$</span> path <span>$R_2 = (v=v_0, a_1, v_1, \dots, a_j, v_j=d)$</span>:</li></ul><p class="math-container">\[q^B_{R_2} = f^B_{a_1} \circ f^B_{a_{2}}\circ\dots \circ f^B_{a_j}(q^B_d)\]</p></li></ul><p>For examples of resources sets, extension and cost functions, checkout the <a href="#Examples">Examples</a> section.</p><hr/><h2 id="Algorithms"><a class="docs-heading-anchor" href="#Algorithms">Algorithms</a><a id="Algorithms-1"></a><a class="docs-heading-anchor-permalink" href="#Algorithms" title="Permalink"></a></h2><p>We first assume that we have accesss to a lower bound <span>$b^B_v\in Q^B$</span> for every vertex <span>$v$</span>, such that <span>$b^B_v\leq^B q^B_R$</span> for all <span>$v-d$</span> path <span>$R$</span>.</p><ul><li>Lemma 1 (<strong>Cut using bounds</strong>) : let <span>$R_1$</span> an <span>$o-v$</span> path. Then :<p class="math-container">\[\forall P = (R_1, R_2)\in \mathcal{P}_{od},\, c(q^F_{R_1}, b^B_v)\leq C(P)\]</p></li><li>Lemma 2 (<strong>Dominance</strong>) : if <span>$q^F_{R_1} \leq^F q^F_{R&#39;_1}$</span>, then for all <span>$R_2$</span> :<p class="math-container">\[c(q^F_{R_1}, q^B_{R_2})\leq c(q^F_{R&#39;_1}, q^B_{R_2})\]</p>i.e. <span>$C(P) \leq C(P&#39;)$</span> (<span>$P=(R_1, R_2),\, P&#39;=(R&#39;_1, R_2)$</span>)</li></ul><h3 id="Generalized-A\\star"><a class="docs-heading-anchor" href="#Generalized-A\\star">Generalized <span>$A^\star$</span></a><a id="Generalized-A\\star-1"></a><a class="docs-heading-anchor-permalink" href="#Generalized-A\\star" title="Permalink"></a></h3><ul><li>Initialization :<ul><li><span>$L \leftarrow \{\text{Empty path in }o\}$</span>: partial paths to process</li><li><span>$M_v \leftarrow \{ q_o^F\}$</span> if <span>$v=o$</span>, <span>$\emptyset$</span> else</li><li><span>$c^\star = +\infty$</span></li><li><span>$P^\star = \text{None}$</span></li></ul></li><li>While <span>$L \neq \emptyset$</span><ul><li>Extract from <span>$L$</span> an <span>$o-v$</span> path <span>$P$</span> minimizing <span>$c(q^F_P, b^B_v)$</span></li><li>Extend <span>$P$</span> : For all <span>$a\in \delta^+(v)$</span><ul><li><span>$Q \leftarrow P + a$</span> (<span>$w$</span> destination vertex of <span>$q$</span>)</li><li><span>$q^F_Q \leftarrow f^F_a(q^F_P)$</span></li><li>If <span>$w = d$</span> and <span>$c_Q &lt; c^\star$</span><ul><li><span>$c^\star \leftarrow c_q$</span></li><li><span>$P^\star \leftarrow Q$</span></li></ul></li><li>Else, if <span>$q^F_q$</span> is not dominated by any path in <span>$M_w$</span> and <span>$c(q^F_Q, b^B_w) &lt; c^\star$</span><ul><li>Add <span>$q^F_Q$</span> to <span>$M_w$</span></li><li>Remove from <span>$M_w$</span> every path dominated by <span>$Q$</span></li><li>Add <span>$Q$</span> to <span>$L$</span></li></ul></li></ul></li></ul></li></ul><h3 id="Computing-bounds"><a class="docs-heading-anchor" href="#Computing-bounds">Computing bounds</a><a id="Computing-bounds-1"></a><a class="docs-heading-anchor-permalink" href="#Computing-bounds" title="Permalink"></a></h3><p>Generalized dynamic programming equation in <span>$b^B$</span>:</p><p class="math-container">\[\boxed{\left\{\begin{aligned}
&amp; b_d = q_d\\
&amp; b_v = \bigwedge_{\substack{a = (v, w)\\ a\in\delta^+(v)}} f^B_a(b_w)
\end{aligned}\right.}\]</p><ul><li>example : when <span>$(f^F_a(x) = )f^B_a(x) = c_a + x$</span> and <span>$\wedge = \min$</span> then <span>$b_v = \min_a c_a + b_w$</span></li></ul><p><span>$\implies$</span> Iterative algorithm along inverse topological order</p><p>Proposition : the solution is a lower bound (it&#39;s even the greater: <span>$q_{b_v} = \bigwedge\limits_{p\in\mathcal{P_{vd}}}q^B_p$</span>)</p><hr/><h2 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h2><h3 id="Shortest-path"><a class="docs-heading-anchor" href="#Shortest-path">Shortest path</a><a id="Shortest-path-1"></a><a class="docs-heading-anchor-permalink" href="#Shortest-path" title="Permalink"></a></h3><ul><li><span>$q_o^F = 0,\, q^B_d = 0$</span></li><li><span>$f^F_a(q) = f^B_a(q) = c_a + q$</span></li><li><span>$c(q^F, q^B) = q^F + q^B$</span></li></ul><h3 id="Usual-resource-constrained-shortest-path"><a class="docs-heading-anchor" href="#Usual-resource-constrained-shortest-path">Usual resource constrained shortest path</a><a id="Usual-resource-constrained-shortest-path-1"></a><a class="docs-heading-anchor-permalink" href="#Usual-resource-constrained-shortest-path" title="Permalink"></a></h3><ul><li><span>$q_o^F = 0,\, q^B_d = 0$</span></li><li><span>$f^F_a(q) = f^B_a(q) = c_a + q$</span></li><li><span>$c(q^F, q^B) = q^F + q^B + \mathbb{I}_{\{q^F + q^B \leq W\}}$</span></li></ul><h3 id="Stochastic-routing"><a class="docs-heading-anchor" href="#Stochastic-routing">Stochastic routing</a><a id="Stochastic-routing-1"></a><a class="docs-heading-anchor-permalink" href="#Stochastic-routing" title="Permalink"></a></h3><ul><li><span>$c_p = \mathbb{E}[\sum_{v\in p}R_v] = \sum_{v\in p} \mathbb{E}[R_v] = \sum_{v\in p}\frac{1}{m}\sum_{j=1}^mR_v^j$</span> (<span>$m$</span> scenarios)</li><li><span>$s_{a=(u,v)}$</span> : slack between <span>$u$</span> and <span>$v$</span></li><li><span>$a=(u,v) \rightarrow R_v^j = \max(R_u^j - s_{uv}, 0) + \varepsilon_v^j$</span></li><li><span>$q^F_u = \begin{bmatrix}C\\ R_u^1\\ \vdots \\ R_u^m\end{bmatrix}\in \mathbb{R}_+^{m+1}$</span>, <span>$q^B_v = \begin{bmatrix}g^1\\ \vdots \\ g^m\end{bmatrix}\in (\mathbb{R}_+^{\mathbb{R}_+})^m$</span></li><li><span>$q^F_o = 0,\, q^B_d = 0\mapsto 0$</span></li><li><span>$f^F_{a=(u, v)}(q_u^F) = \begin{bmatrix}C + \frac{1}{m}\sum_{j=1}^m R_v^j\\ R_v^1 = \max(R_u^1 - S_a, 0) + \varepsilon_v^1\\ \vdots \\ R_v^m = \max(R_u^m - S_a, 0) + \varepsilon_v^m\end{bmatrix}$</span></li><li>Let <span>$r_{a=(u,v)}^j(R) = \max(R - S_a, 0) + \varepsilon_v^j$</span></li><li><span>$f^B_{a=(u,v)}(q_v^B) = \begin{bmatrix}R\mapsto r_a^1(R) + g^1(r_a^1(R)) \\ \vdots \\ R\mapsto r_a^m(R) + g^m(r_a^m(R))\end{bmatrix}$</span></li><li><span>$c\left(\begin{bmatrix}C\\ R_u^1\\ \vdots \\ R_u^m\end{bmatrix}, \begin{bmatrix}g^1\\ \vdots \\ g^m\end{bmatrix}\right) = C + \frac{1}{m}\sum_{j=1}^m g^j(R^j_u)$</span></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../basic_shortest_path/">Usual shortest path »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Thursday 22 August 2024 09:31">Thursday 22 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
